---
name: Dispatch to docs repo

on:
    push:
        branches: [main]
        paths:
            - docs/**
    workflow_dispatch:

jobs:
    dispatch:
        runs-on: blacksmith-2vcpu-ubuntu-2404
        strategy:
            matrix:
                repo: [All-Hands-AI/docs]
        steps:
            - name: Push to docs repo
              uses: peter-evans/repository-dispatch@v4
              with:
                  token: ${{ secrets.ALLHANDS_BOT_GITHUB_PAT }}
                  repository: ${{ matrix.repo }}
                  event-type: update
                  client-payload: '{"ref": "${{ github.ref }}", "sha": "${{ github.sha }}", "module": "agent-sdk", "branch": "main"}'
